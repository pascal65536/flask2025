<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
        
    <title>Experiments: {% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>

<body>
    <header class="header">
<ul class="nav-links">
    <li><a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a></li>
    <li><a href="{{ url_for('pictures') }}">–ì–∞–ª–µ—Ä–µ—è</a></li>
    <li><a href="{{ url_for('gena') }}">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</a></li>
    <li><a href="{{ url_for('weather1') }}">–ü–æ–≥–æ–¥–∞ 1</a></li>
    <li><a href="{{ url_for('weather2') }}">–ü–æ–≥–æ–¥–∞ 2</a></li>
    <li><a href="{{ url_for('weather3') }}">–ü–æ–≥–æ–¥–∞ 3</a></li>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –Ω–∞–≤–±–∞—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–æ—Ä–º—ã -->
    <li>
        <form method="post" action="{{ url_for('settings') }}" style="display: flex; align-items: center; gap: 0.5rem;">
            <!-- –ü–∏–∫—Ç–æ–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è per_page -->
            <select name="per_page" onchange="this.form.submit()" title="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ" style="font-size: 0.9rem;">
                {% for val, label in [('8','8'),('16','16'),('24','24'),('32','32'),('0','–í—Å–µ')] %}
                    <option value="{{ val }}" {% if settings.per_page|string == val %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>

            <!-- –ü–∏–∫—Ç–æ–≥—Ä–∞–º–º–∞ –≤—ã–±–æ—Ä–∞ pic (–∏–∫–æ–Ω–∫–∏ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ <img> –∏–ª–∏ emoji) -->
            <select name="pic" onchange="this.form.submit()" title="–í—ã–±–æ—Ä –∫–∞—Ä—Ç–∏–Ω–∫–∏" style="font-size: 0.9rem;">
                {% for val, label in [('250.jpg', 'üñºÔ∏è 250'), ('500.webp', 'üñºÔ∏è 500'), ('1080.png', 'üñºÔ∏è 1080')] %}
                    <option value="{{ val }}" {% if settings.pic == val %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>

            <!-- –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è html –∏ css –¥–ª—è –±–æ–ª—å—à–µ–π –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ -->
            <label title="–ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å HTML" style="margin-left: 0.5rem;"><input type="checkbox" name="html" value="1" {% if settings.html %}checked{% endif %} onchange="this.form.submit()"> HTML</label>
            <label title="–ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CSS"><input type="checkbox" name="css" value="1" {% if settings.css %}checked{% endif %} onchange="this.form.submit()"> CSS</label>
        </form>
    </li>
    <li>
        <strong>–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±—ç–∫–µ–Ω–¥–∞:</strong> {{ "%.2f"|format(execution_time * 1000) }} –º—Å
    </li>
</ul>

    </header>

    <main class="main-content">
        <div class="container">

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="flash-message flash-{{ category }}">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            <div class="page-header">
                <h1>{{ name }}</h1>
                <p>{{ descriptions }}</p>
            </div>            

            {% block content %}{% endblock %}

            <div class="experiment-time">
            {% if sql_queries %}
                <h4 class="sql-queries-title">SQL-–∑–∞–ø—Ä–æ—Å—ã (–≤—Å–µ–≥–æ: {{ sql_queries|length }})</h4>
                <div class="sql-queries-list">
                {% for q in sql_queries %}
                    <div class="sql-query-item">
                    <div class="sql-statement">
                        <strong>SQL:</strong>
                        <pre>{{ q.statement }}</pre>
                    </div>
                    <div class="sql-params">
                        <strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
                        <code>{{ q.parameters|tojson(indent=2) }}</code>
                    </div>
                    {% if q.duration is defined %}
                        <div class="sql-duration">
                        <strong>–í—Ä–µ–º—è:</strong> {{ "%.2f"|format(q.duration * 1000) }} –º—Å
                        </div>
                    {% endif %}
                    </div>
                {% endfor %}
                </div>
            {% else %}
                <p class="no-queries">–ù–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.</p>
            {% endif %}
            </div>

        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Experiments</p>
        </div>
    </footer>

    {% block scripts %}{% endblock %}
</body>

</html>