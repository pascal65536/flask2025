{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="card">
    <form method="POST" action="{{ url_for('gena') }}">
        <div style="display: flex; gap: 2rem; align-items: center; justify-content: center; flex-wrap: wrap;">
            <div style="text-align: center;">
                <label for="color" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Выберите цвет:
                </label>
                <input type="color" id="color" name="color" value="{{ request.form.get('color', '#3498db') }}" 
                       style="width: 100px; height: 100px;">
                <br>
                <input type="text" name="color_hex" value="{{ request.form.get('color', '#3498db') }}" 
                       class="form-control" style="width: 120px; margin-top: 0.5rem;">
            </div>
            
            <div style="text-align: center;">
                <label class="checkbox-label">
                    <input type="checkbox" name="check_existing" {% if request.form.get('check_existing') %}checked{% endif %}>
                    Проверять существующие изображения
                </label>
                <br>
                <button type="submit" class="btn" style="margin-top: 1rem;">Сгенерировать изображение</button>
            </div>
        </div>
    </form>
</div>

{% if image_data %}
<div class="card">
    <h3>Изображение создано!</h3>
    <p>Цвет: {{ image_data.color_hex }} {% if image_data.is_existing %}(из кэша){% else %}(новое){% endif %}</p>
    <img src="{{ image_data.image_url }}" alt="Generated image" style="max-width: 300px; border-radius: 10px;">
    <p><a href="{{ image_data.image_url }}" download class="btn">Скачать изображение</a></p>
</div>
{% endif %}

{% if error %}
<div class="card" style="background: #f8d7da; color: #721c24;">
    <h3>Ошибка</h3>
    <p>{{ error }}</p>
</div>
{% endif %}
{% endblock %}